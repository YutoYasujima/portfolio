<%= form_with model: profile, class: "form" do |f| %>
  <div class="field">
    <%= f.label :nickname, "ニックネーム", class: "require" %>
    <%= f.text_field :nickname, autofocus: true, class: "text-field" %>
  </div>

  <div data-controller="prefecture-municipality" class="field">
    <%= label_tag nil, "マイタウン", class: "require" %>
    <div class="mytown-selects">
      <%= f.collection_select :prefecture_id, Prefecture.all, :id, :name_kanji, {}, { class: "select-field", data: { action: "change->prefecture-municipality#loadMunicipalities" }} %>

      <%= f.collection_select :municipality_id, Municipality.where(prefecture_id: f.object.prefecture_id || 1).order(:name_kana), :id, :name_kanji, {}, { class: "select-field", data: { prefecture_municipality_target: "municipality" }} %>
    </div>
  </div>

  <%# 同意チェック %>
  <div class="field flex">
    <%= f.check_box :agreement, class: "ml-2 scale-150" %>
    <%= f.label :agreement, class: "flex-1 ml-4 text-center" do %>
      <%= link_to "利用規約", terms_path, target: "_blank", class: "link text-xl" %>
      <span> / </span>
      <%= link_to "プライバシーポリシー", privacy_path, target: "_blank", class: "link text-xl" %>
      <div><span>に同意します</span></div>
    <% end %>
  </div>

  <div class="actions text-center">
    <%= f.submit nil, class: "button" %>
  </div>
<% end %>